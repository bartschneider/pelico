import{S as I,i as j,s as G,d as u,t as v,a as k,c as D,b as p,e as y,f as b,g as _,h as w,j as S,k as V,l as d,m as q,o as L,n as m,p as M,q as P,r as z,u as F,v as A,w as H,x as T,y as B}from"../chunks/-3cQnFvs.js";import{e as E,u as J,G as K,o as N}from"../chunks/CcNbzAFb.js";import"../chunks/IHki7fMi.js";function $(c,t,e){const l=c.slice();return l[5]=t[e],l}function O(c){let t,e=[],l=new Map,a,n=E(c[0]);const i=o=>o[5].id;for(let o=0;o<n.length;o+=1){let r=$(c,n,o),s=i(r);l.set(s,e[o]=x(s,r))}return{c(){t=d("div");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){t=_(o,"DIV",{class:!0});var r=w(t);for(let s=0;s<e.length;s+=1)e[s].l(r);r.forEach(u),this.h()},h(){b(t,"class","row")},m(o,r){p(o,t,r);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null);a=!0},p(o,r){r&9&&(n=E(o[0]),F(),e=J(e,r,i,1,o,n,l,t,N,x,null,$),D())},i(o){if(!a){for(let r=0;r<n.length;r+=1)k(e[r]);a=!0}},o(o){for(let r=0;r<e.length;r+=1)v(e[r]);a=!1},d(o){o&&u(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function Q(c){let t,e;return{c(){t=d("div"),e=z(c[2]),this.h()},l(l){t=_(l,"DIV",{class:!0});var a=w(t);e=P(a,c[2]),a.forEach(u),this.h()},h(){b(t,"class","alert alert-danger")},m(l,a){p(l,t,a),y(t,e)},p(l,a){a&4&&M(e,l[2])},i:m,o:m,d(l){l&&u(t)}}}function R(c){let t,e="Loading shortlist...";return{c(){t=d("p"),t.textContent=e},l(l){t=_(l,"P",{"data-svelte-h":!0}),S(t)!=="svelte-zuyn7o"&&(t.textContent=e)},m(l,a){p(l,t,a)},p:m,i:m,o:m,d(l){l&&u(t)}}}function x(c,t){let e,l,a,n;function i(){return t[4](t[5])}return l=new K({props:{game:t[5].game}}),l.$on("delete",i),{key:c,first:null,c(){e=d("div"),B(l.$$.fragment),a=q(),this.h()},l(o){e=_(o,"DIV",{class:!0});var r=w(e);T(l.$$.fragment,r),a=V(r),r.forEach(u),this.h()},h(){b(e,"class","col-lg-3 col-md-4 col-sm-6 mb-4"),this.first=e},m(o,r){p(o,e,r),H(l,e,null),y(e,a),n=!0},p(o,r){t=o;const s={};r&1&&(s.game=t[5].game),l.$set(s)},i(o){n||(k(l.$$.fragment,o),n=!0)},o(o){v(l.$$.fragment,o),n=!1},d(o){o&&u(e),A(l)}}}function U(c){let t,e,l="Shortlist",a,n,i,o;const r=[R,Q,O],s=[];function g(h,f){return h[1]?0:h[2]?1:2}return n=g(c),i=s[n]=r[n](c),{c(){t=d("div"),e=d("h1"),e.textContent=l,a=q(),i.c(),this.h()},l(h){t=_(h,"DIV",{class:!0});var f=w(t);e=_(f,"H1",{"data-svelte-h":!0}),S(e)!=="svelte-1ywqnfo"&&(e.textContent=l),a=V(f),i.l(f),f.forEach(u),this.h()},h(){b(t,"class","container-fluid mt-4")},m(h,f){p(h,t,f),y(t,e),y(t,a),s[n].m(t,null),o=!0},p(h,[f]){let C=n;n=g(h),n===C?s[n].p(h,f):(F(),v(s[C],1,1,()=>{s[C]=null}),D(),i=s[n],i?i.p(h,f):(i=s[n]=r[n](h),i.c()),k(i,1),i.m(t,null))},i(h){o||(k(i),o=!0)},o(h){v(i),o=!1},d(h){h&&u(t),s[n].d()}}}function W(c,t,e){let l=[],a=!0,n=null;L(async()=>{try{const r=await fetch("/api/v1/shortlist");r.ok?e(0,l=await r.json()):e(2,n="Failed to load shortlist from the backend.")}catch(r){e(2,n="Error connecting to the backend."),console.error(r)}finally{e(1,a=!1)}});async function i(r){try{(await fetch(`/api/v1/shortlist/${r}`,{method:"DELETE"})).ok?e(0,l=l.filter(g=>g.game.id!==r)):alert("Failed to remove game from shortlist.")}catch(s){alert("An error occurred while removing the game from the shortlist."),console.error(s)}}return[l,a,n,i,r=>i(r.game.id)]}class ee extends I{constructor(t){super(),j(this,t,W,U,G,{})}}export{ee as component};
