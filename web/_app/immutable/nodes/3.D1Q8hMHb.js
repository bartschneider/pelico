import{S as Ae,i as Pe,s as Fe,d as c,m as he,r as Be,o as q,p as P,q as b,u as Ie,v as me,b as p,c as g,w as _e,x as $,e as v,f as G,y as z,h as S,g as B,z as pe,A as Le,j as k,k as N,t as U,B as ge,C as Ue,n as Y,D as Oe,a as re,E as de}from"../chunks/TI43a4Sy.js";import{e as Me,u as qe,o as ze}from"../chunks/CoBWRV4_.js";import"../chunks/IHki7fMi.js";import{a as le,A as ue}from"../chunks/CGvhUVsK.js";import{G as je}from"../chunks/BMM_9bXc.js";import{G as Re,a as Qe,S as Ye}from"../chunks/d4Zu9pFX.js";function Ge(o,e,t){const l=o.slice();return l[24]=e[t],l}function Se(o){let e,t='<i class="fas fa-times"></i>',l,s;return{c(){e=k("button"),e.innerHTML=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),z(e)!=="svelte-82a2sv"&&(e.innerHTML=t),this.h()},h(){b(e,"class","btn btn-outline-secondary"),b(e,"type","button")},m(a,r){p(a,e,r),l||(s=$(e,"click",o[19]),l=!0)},p:Y,d(a){a&&c(e),l=!1,s()}}}function Je(o){let e=o[0].length+"",t,l;return{c(){t=U(e),l=U(" games total")},l(s){t=B(s,e),l=B(s," games total")},m(s,a){p(s,t,a),p(s,l,a)},p(s,a){a&1&&e!==(e=s[0].length+"")&&re(t,e)},d(s){s&&(c(t),c(l))}}}function Ke(o){let e,t=o[9].length+"",l,s,a=o[0].length+"",r,i;return{c(){e=U("Showing "),l=U(t),s=U(" of "),r=U(a),i=U(" games")},l(n){e=B(n,"Showing "),l=B(n,t),s=B(n," of "),r=B(n,a),i=B(n," games")},m(n,u){p(n,e,u),p(n,l,u),p(n,s,u),p(n,r,u),p(n,i,u)},p(n,u){u&512&&t!==(t=n[9].length+"")&&re(l,t),u&1&&a!==(a=n[0].length+"")&&re(r,a)},d(n){n&&(c(e),c(l),c(s),c(r),c(i))}}}function We(o){let e,t=[],l=new Map,s,a=Me(o[9]);const r=i=>i[24].id;for(let i=0;i<a.length;i+=1){let n=Ge(o,a,i),u=r(n);l.set(u,t[i]=Ne(u,n))}return{c(){e=k("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var n=G(e);for(let u=0;u<t.length;u+=1)t[u].l(n);n.forEach(c),this.h()},h(){b(e,"class","row")},m(i,n){p(i,e,n);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(i,n){n&176640&&(a=Me(i[9]),de(),t=qe(t,n,r,1,i,a,l,e,ze,Ne,null,Ge),me())},i(i){if(!s){for(let n=0;n<a.length;n+=1)P(t[n]);s=!0}},o(i){for(let n=0;n<t.length;n+=1)q(t[n]);s=!1},d(i){i&&c(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Xe(o){let e;function t(a,r){return a[1]?et:xe}let l=t(o),s=l(o);return{c(){e=k("div"),s.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var r=G(e);s.l(r),r.forEach(c),this.h()},h(){b(e,"class","text-center py-5")},m(a,r){p(a,e,r),s.m(e,null)},p(a,r){l===(l=t(a))&&s?s.p(a,r):(s.d(1),s=l(a),s&&(s.c(),s.m(e,null)))},i:Y,o:Y,d(a){a&&c(e),s.d()}}}function Ze(o){let e,t,l,s,a,r,i,n="Try Again",u,w;return{c(){e=k("div"),t=k("i"),l=N(),s=k("div"),a=U(o[4]),r=N(),i=k("button"),i.textContent=n,this.h()},l(m){e=v(m,"DIV",{class:!0});var C=G(e);t=v(C,"I",{class:!0}),G(t).forEach(c),l=S(C),s=v(C,"DIV",{});var h=G(s);a=B(h,o[4]),r=S(h),i=v(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-10cr3o9"&&(i.textContent=n),h.forEach(c),C.forEach(c),this.h()},h(){b(t,"class","fas fa-exclamation-triangle me-2"),b(i,"class","btn btn-sm btn-outline-danger ms-2"),b(e,"class","alert alert-danger d-flex align-items-center")},m(m,C){p(m,e,C),g(e,t),g(e,l),g(e,s),g(s,a),g(s,r),g(s,i),u||(w=$(i,"click",o[10]),u=!0)},p(m,C){C&16&&re(a,m[4])},i:Y,o:Y,d(m){m&&c(e),u=!1,w()}}}function $e(o){let e,t='<div class="text-center"><div class="spinner-border text-primary mb-3" role="status"><span class="visually-hidden">Loading...</span></div> <p class="text-muted">Loading games...</p></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=v(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),z(e)!=="svelte-1g4zktf"&&(e.innerHTML=t),this.h()},h(){b(e,"class","d-flex justify-content-center align-items-center"),Oe(e,"height","300px")},m(l,s){p(l,e,s)},p:Y,i:Y,o:Y,d(l){l&&c(e)}}}function Ne(o,e){let t,l,s,a;return l=new je({props:{game:e[24]}}),l.$on("edit",e[12]),l.$on("delete",e[13]),l.$on("log",e[15]),l.$on("view",e[17]),{key:o,first:null,c(){t=k("div"),ge(l.$$.fragment),s=N(),this.h()},l(r){t=v(r,"DIV",{class:!0});var i=G(t);pe(l.$$.fragment,i),s=S(i),i.forEach(c),this.h()},h(){b(t,"class","col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4"),this.first=t},m(r,i){p(r,t,i),_e(l,t,null),g(t,s),a=!0},p(r,i){e=r;const n={};i&512&&(n.game=e[24]),l.$set(n)},i(r){a||(P(l.$$.fragment,r),a=!0)},o(r){q(l.$$.fragment,r),a=!1},d(r){r&&c(t),he(l)}}}function xe(o){let e,t,l,s="No games in your collection",a,r,i="Start building your collection by adding your first game!",n,u,w='<i class="fas fa-plus me-1"></i> Add Your First Game',m,C;return{c(){e=k("i"),t=N(),l=k("h4"),l.textContent=s,a=N(),r=k("p"),r.textContent=i,n=N(),u=k("button"),u.innerHTML=w,this.h()},l(h){e=v(h,"I",{class:!0}),G(e).forEach(c),t=S(h),l=v(h,"H4",{"data-svelte-h":!0}),z(l)!=="svelte-1d281y8"&&(l.textContent=s),a=S(h),r=v(h,"P",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1vx8u7"&&(r.textContent=i),n=S(h),u=v(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(u)!=="svelte-9pz2no"&&(u.innerHTML=w),this.h()},h(){b(e,"class","fas fa-gamepad fa-3x text-muted mb-3"),b(r,"class","text-muted"),b(u,"class","btn btn-primary")},m(h,V){p(h,e,V),p(h,t,V),p(h,l,V),p(h,a,V),p(h,r,V),p(h,n,V),p(h,u,V),m||(C=$(u,"click",o[11]),m=!0)},p:Y,d(h){h&&(c(e),c(t),c(l),c(a),c(r),c(n),c(u)),m=!1,C()}}}function et(o){let e,t,l,s="No games found",a,r,i,n,u,w,m,C="Clear Search",h,V;return{c(){e=k("i"),t=N(),l=k("h4"),l.textContent=s,a=N(),r=k("p"),i=U('No games match your search "'),n=U(o[1]),u=U('"'),w=N(),m=k("button"),m.textContent=C,this.h()},l(y){e=v(y,"I",{class:!0}),G(e).forEach(c),t=S(y),l=v(y,"H4",{"data-svelte-h":!0}),z(l)!=="svelte-1o14eci"&&(l.textContent=s),a=S(y),r=v(y,"P",{class:!0});var T=G(r);i=B(T,'No games match your search "'),n=B(T,o[1]),u=B(T,'"'),T.forEach(c),w=S(y),m=v(y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-ocaac3"&&(m.textContent=C),this.h()},h(){b(e,"class","fas fa-search fa-3x text-muted mb-3"),b(r,"class","text-muted"),b(m,"class","btn btn-outline-primary")},m(y,T){p(y,e,T),p(y,t,T),p(y,l,T),p(y,a,T),p(y,r,T),g(r,i),g(r,n),g(r,u),p(y,w,T),p(y,m,T),h||(V=$(m,"click",o[20]),h=!0)},p(y,T){T&2&&re(n,y[1])},d(y){y&&(c(e),c(t),c(l),c(a),c(r),c(w),c(m)),h=!1,V()}}}function Ve(o){let e,t;return e=new Qe({props:{game:o[8],show:o[6]}}),e.$on("close",o[22]),e.$on("edit",o[12]),e.$on("delete",o[13]),e.$on("log",o[15]),{c(){ge(e.$$.fragment)},l(l){pe(e.$$.fragment,l)},m(l,s){_e(e,l,s),t=!0},p(l,s){const a={};s&256&&(a.game=l[8]),s&64&&(a.show=l[6]),e.$set(a)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function He(o){let e,t;return e=new Ye({props:{game:o[8],show:o[7]}}),e.$on("submit",o[16]),e.$on("close",o[23]),{c(){ge(e.$$.fragment)},l(l){pe(e.$$.fragment,l)},m(l,s){_e(e,l,s),t=!0},p(l,s){const a={};s&256&&(a.game=l[8]),s&128&&(a.show=l[7]),e.$set(a)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function tt(o){let e,t,l,s="Game Collection",a,r,i,n,u,w,m,C,h='<i class="fas fa-plus me-1"></i> Add Game',V,y,T,A,j,ie='<i class="fas fa-search"></i>',se,F,ae,ne,J,R,oe,d,E,M,D,Z,K,x,ee,be,ke,H=o[1]&&Se(o);function ye(f,_){return f[1]?Ke:Je}let fe=ye(o),O=fe(o);const we=[$e,Ze,Xe,We],W=[];function Ce(f,_){return f[3]?0:f[4]?1:f[9].length===0?2:3}d=Ce(o),E=W[d]=we[d](o),D=new Re({props:{game:o[8],platforms:o[2],show:o[5]}}),D.$on("submit",o[14]),D.$on("close",o[21]);let I=o[6]&&o[8]&&Ve(o),L=o[7]&&o[8]&&He(o);return{c(){e=k("div"),t=k("div"),l=k("h1"),l.textContent=s,a=N(),r=k("div"),i=k("button"),n=k("i"),w=U(" Refresh"),m=N(),C=k("button"),C.innerHTML=h,V=N(),y=k("div"),T=k("div"),A=k("div"),j=k("span"),j.innerHTML=ie,se=N(),F=k("input"),ae=N(),H&&H.c(),ne=N(),J=k("div"),R=k("p"),O.c(),oe=N(),E.c(),M=N(),ge(D.$$.fragment),Z=N(),I&&I.c(),K=N(),L&&L.c(),x=Le(),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=G(e);t=v(_,"DIV",{class:!0});var X=G(t);l=v(X,"H1",{"data-svelte-h":!0}),z(l)!=="svelte-8q22c4"&&(l.textContent=s),a=S(X),r=v(X,"DIV",{class:!0});var Q=G(r);i=v(Q,"BUTTON",{class:!0});var ve=G(i);n=v(ve,"I",{class:!0}),G(n).forEach(c),w=B(ve," Refresh"),ve.forEach(c),m=S(Q),C=v(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-mzv9ad"&&(C.innerHTML=h),Q.forEach(c),X.forEach(c),V=S(_),y=v(_,"DIV",{class:!0});var ce=G(y);T=v(ce,"DIV",{class:!0});var Ee=G(T);A=v(Ee,"DIV",{class:!0});var te=G(A);j=v(te,"SPAN",{class:!0,"data-svelte-h":!0}),z(j)!=="svelte-1ag4q0b"&&(j.innerHTML=ie),se=S(te),F=v(te,"INPUT",{type:!0,class:!0,placeholder:!0}),ae=S(te),H&&H.l(te),te.forEach(c),Ee.forEach(c),ne=S(ce),J=v(ce,"DIV",{class:!0});var Te=G(J);R=v(Te,"P",{class:!0});var De=G(R);O.l(De),De.forEach(c),Te.forEach(c),ce.forEach(c),oe=S(_),E.l(_),_.forEach(c),M=S(f),pe(D.$$.fragment,f),Z=S(f),I&&I.l(f),K=S(f),L&&L.l(f),x=Le(),this.h()},h(){b(n,"class",u="fas fa-sync-alt "+(o[3]?"fa-spin":"")),b(i,"class","btn btn-outline-secondary"),i.disabled=o[3],b(C,"class","btn btn-primary"),b(r,"class","d-flex gap-2"),b(t,"class","d-flex justify-content-between align-items-center mb-4"),b(j,"class","input-group-text"),b(F,"type","text"),b(F,"class","form-control"),b(F,"placeholder","Search games by title, genre, or platform..."),b(A,"class","input-group"),b(T,"class","col-md-6"),b(R,"class","text-muted mt-2 mb-0"),b(J,"class","col-md-6"),b(y,"class","row mb-4"),b(e,"class","container-fluid mt-4")},m(f,_){p(f,e,_),g(e,t),g(t,l),g(t,a),g(t,r),g(r,i),g(i,n),g(i,w),g(r,m),g(r,C),g(e,V),g(e,y),g(y,T),g(T,A),g(A,j),g(A,se),g(A,F),Ie(F,o[1]),g(A,ae),H&&H.m(A,null),g(y,ne),g(y,J),g(J,R),O.m(R,null),g(e,oe),W[d].m(e,null),p(f,M,_),_e(D,f,_),p(f,Z,_),I&&I.m(f,_),p(f,K,_),L&&L.m(f,_),p(f,x,_),ee=!0,be||(ke=[$(i,"click",o[10]),$(C,"click",o[11]),$(F,"input",o[18])],be=!0)},p(f,[_]){(!ee||_&8&&u!==(u="fas fa-sync-alt "+(f[3]?"fa-spin":"")))&&b(n,"class",u),(!ee||_&8)&&(i.disabled=f[3]),_&2&&F.value!==f[1]&&Ie(F,f[1]),f[1]?H?H.p(f,_):(H=Se(f),H.c(),H.m(A,null)):H&&(H.d(1),H=null),fe===(fe=ye(f))&&O?O.p(f,_):(O.d(1),O=fe(f),O&&(O.c(),O.m(R,null)));let X=d;d=Ce(f),d===X?W[d].p(f,_):(de(),q(W[X],1,1,()=>{W[X]=null}),me(),E=W[d],E?E.p(f,_):(E=W[d]=we[d](f),E.c()),P(E,1),E.m(e,null));const Q={};_&256&&(Q.game=f[8]),_&4&&(Q.platforms=f[2]),_&32&&(Q.show=f[5]),D.$set(Q),f[6]&&f[8]?I?(I.p(f,_),_&320&&P(I,1)):(I=Ve(f),I.c(),P(I,1),I.m(K.parentNode,K)):I&&(de(),q(I,1,1,()=>{I=null}),me()),f[7]&&f[8]?L?(L.p(f,_),_&384&&P(L,1)):(L=He(f),L.c(),P(L,1),L.m(x.parentNode,x)):L&&(de(),q(L,1,1,()=>{L=null}),me())},i(f){ee||(P(E),P(D.$$.fragment,f),P(I),P(L),ee=!0)},o(f){q(E),q(D.$$.fragment,f),q(I),q(L),ee=!1},d(f){f&&(c(e),c(M),c(Z),c(K),c(x)),H&&H.d(),O.d(),W[d].d(),he(D,f),I&&I.d(f),L&&L.d(f),be=!1,Be(ke)}}}function lt(o,e,t){let l=[],s=[],a=!0,r=null,i=!1,n=!1,u=!1,w=null,m="",C=[];Ue(async()=>{await h()});async function h(){try{t(3,a=!0),t(4,r=null);const[d,E]=await Promise.all([le.getGames(),le.getPlatforms()]);t(0,l=d||[]),t(2,s=E||[])}catch(d){d instanceof ue?t(4,r=`Failed to load data: ${d.message}`):t(4,r="Error connecting to the backend. Please check if the server is running."),console.error("Load data error:",d)}finally{t(3,a=!1)}}function V(){t(8,w=null),t(5,i=!0)}function y(d){t(8,w=d.detail),t(6,n=!1),t(5,i=!0)}async function T(d){const E=d.detail;try{await le.deleteGame(E),t(0,l=l.filter(M=>M.id!==E))}catch(M){M instanceof ue?alert(`Failed to delete game: ${M.message}`):alert("An error occurred while deleting the game."),console.error("Delete game error:",M)}}async function A(d){const E=d.detail,M=!!w;try{let D;if(M&&w){D=await le.updateGame(w.id,E);const Z=l.findIndex(K=>K.id===w.id);Z!==-1&&(t(0,l[Z]=D,l),t(0,l=[...l]))}else D=await le.createGame(E),t(0,l=[...l,D]);t(5,i=!1)}catch(D){D instanceof ue?alert(`Failed to save game: ${D.message}`):alert("An error occurred while saving the game."),console.error("Save game error:",D)}}function j(d){const E=d.detail,M=l.find(D=>D.id===E);M&&(t(8,w=M),t(7,u=!0),t(6,n=!1))}async function ie(d){const E=d.detail;if(w)try{await le.createSession(w.id,E),t(7,u=!1)}catch(M){M instanceof ue?alert(`Failed to log session: ${M.message}`):alert("An error occurred while logging the session."),console.error("Log session error:",M)}}function se(d){t(8,w=d.detail),t(6,n=!0)}function F(){m=this.value,t(1,m)}const ae=()=>t(1,m=""),ne=()=>t(1,m=""),J=()=>t(5,i=!1),R=()=>t(6,n=!1),oe=()=>t(7,u=!1);return o.$$.update=()=>{o.$$.dirty&3&&t(9,C=m?l.filter(d=>d.title.toLowerCase().includes(m.toLowerCase())||d.genre?.toLowerCase().includes(m.toLowerCase())||d.platform?.name?.toLowerCase().includes(m.toLowerCase())):l)},[l,m,s,a,r,i,n,u,w,C,h,V,y,T,A,j,ie,se,F,ae,ne,J,R,oe]}class ft extends Ae{constructor(e){super(),Pe(this,e,lt,tt,Fe,{})}}export{ft as component};
