import{S as rt,i as it,s as ct,n as ue,d as u,b as E,q as je,L as mt,r as ft,u as ut,a as ve,v as ge,o as i,w as dt,c as f,m as $,x as ht,e as h,f as w,g as O,h as D,p as K,j as _,t as P,k as T,H as ze,D as fe,E as ne,F as Ue,I as qe,J as Re,K as Je,y as _t,G as Be}from"../chunks/kp0KmzAt.js";import{e as Ze,u as pt,o as gt}from"../chunks/NZ8AIpzC.js";import"../chunks/IHki7fMi.js";import{a as Se,A as Pe}from"../chunks/C_uHZB6E.js";import{G as vt}from"../chunks/DUTJA_9k.js";import{G as bt,a as kt}from"../chunks/C_FSMx5Z.js";function xe(s){let e,t,l,o,a,r=s[2]?"Edit":"Log",n,c,d=s[1].title+"",b,g,C,k,V,p,I,A,ee='Start Time <span class="text-danger">*</span>',N,Q,X,z,te,ie="End Time",ae,q,y,S,M,L,de="Rating (1-10)",oe,U,me,le,ce,B="Notes",Ce,R,W,he,se=s[6].length+"",we,H,F,m,v,j,re="Cancel",ye,Z,be,_e,ke=s[2]?"Update":"Log",Ee,Ke,Me,De,Qe,Ye,x=!s[4]&&$e(),Y=s[3]&&s[4]&&et(s);return{c(){e=_("div"),t=_("div"),l=_("div"),o=_("div"),a=_("h5"),n=P(r),c=P(" Play Session - "),b=P(d),g=T(),C=_("button"),k=T(),V=_("form"),p=_("div"),I=_("div"),A=_("label"),A.innerHTML=ee,N=T(),Q=_("input"),X=T(),z=_("div"),te=_("label"),te.textContent=ie,ae=T(),q=_("input"),y=T(),x&&x.c(),S=T(),M=_("div"),L=_("label"),L.textContent=de,oe=T(),U=_("input"),me=T(),le=_("div"),ce=_("label"),ce.textContent=B,Ce=T(),R=_("textarea"),W=T(),he=_("small"),we=P(se),H=P("/1000 characters"),F=T(),Y&&Y.c(),m=T(),v=_("div"),j=_("button"),j.textContent=re,ye=T(),Z=_("button"),be=_("i"),_e=T(),Ee=P(ke),Ke=P(" Session"),Me=T(),De=_("div"),this.h()},l(G){e=h(G,"DIV",{class:!0,tabindex:!0,role:!0});var J=w(e);t=h(J,"DIV",{class:!0,role:!0});var We=w(t);l=h(We,"DIV",{class:!0});var Ve=w(l);o=h(Ve,"DIV",{class:!0});var Ne=w(o);a=h(Ne,"H5",{class:!0});var Ge=w(a);n=O(Ge,r),c=O(Ge," Play Session - "),b=O(Ge,d),Ge.forEach(u),g=D(Ne),C=h(Ne,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(C).forEach(u),Ne.forEach(u),k=D(Ve),V=h(Ve,"FORM",{});var Ae=w(V);p=h(Ae,"DIV",{class:!0});var pe=w(p);I=h(pe,"DIV",{class:!0});var He=w(I);A=h(He,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(A)!=="svelte-pzu865"&&(A.innerHTML=ee),N=D(He),Q=h(He,"INPUT",{type:!0,class:!0,id:!0}),He.forEach(u),X=D(pe),z=h(pe,"DIV",{class:!0});var Te=w(z);te=h(Te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(te)!=="svelte-1op33g"&&(te.textContent=ie),ae=D(Te),q=h(Te,"INPUT",{type:!0,class:!0,id:!0,min:!0}),y=D(Te),x&&x.l(Te),Te.forEach(u),S=D(pe),M=h(pe,"DIV",{class:!0});var Fe=w(M);L=h(Fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(L)!=="svelte-8t176m"&&(L.textContent=de),oe=D(Fe),U=h(Fe,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0,placeholder:!0}),Fe.forEach(u),me=D(pe),le=h(pe,"DIV",{class:!0});var Ie=w(le);ce=h(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(ce)!=="svelte-1yxjg8a"&&(ce.textContent=B),Ce=D(Ie),R=h(Ie,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0,maxlength:!0}),w(R).forEach(u),W=D(Ie),he=h(Ie,"SMALL",{class:!0});var Xe=w(he);we=O(Xe,se),H=O(Xe,"/1000 characters"),Xe.forEach(u),Ie.forEach(u),F=D(pe),Y&&Y.l(pe),pe.forEach(u),m=D(Ae),v=h(Ae,"DIV",{class:!0});var Oe=w(v);j=h(Oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(j)!=="svelte-t8h2xj"&&(j.textContent=re),ye=D(Oe),Z=h(Oe,"BUTTON",{type:!0,class:!0});var Le=w(Z);be=h(Le,"I",{class:!0}),w(be).forEach(u),_e=D(Le),Ee=O(Le,ke),Ke=O(Le," Session"),Le.forEach(u),Oe.forEach(u),Ae.forEach(u),Ve.forEach(u),We.forEach(u),J.forEach(u),Me=D(G),De=h(G,"DIV",{class:!0}),w(De).forEach(u),this.h()},h(){i(a,"class","modal-title"),i(C,"type","button"),i(C,"class","btn-close"),i(C,"aria-label","Close"),i(o,"class","modal-header"),i(A,"for","startTime"),i(A,"class","form-label"),i(Q,"type","datetime-local"),i(Q,"class","form-control"),i(Q,"id","startTime"),Q.required=!0,i(I,"class","mb-3"),i(te,"for","endTime"),i(te,"class","form-label"),i(q,"type","datetime-local"),i(q,"class","form-control"),i(q,"id","endTime"),i(q,"min",s[3]),i(z,"class","mb-3"),i(L,"for","rating"),i(L,"class","form-label"),i(U,"type","number"),i(U,"class","form-control"),i(U,"id","rating"),i(U,"min","1"),i(U,"max","10"),i(U,"placeholder","How was this session?"),i(M,"class","mb-3"),i(ce,"for","notes"),i(ce,"class","form-label"),i(R,"class","form-control"),i(R,"id","notes"),i(R,"rows","3"),i(R,"placeholder","Any thoughts about this play session?"),i(R,"maxlength","1000"),i(he,"class","text-muted"),i(le,"class","mb-3"),i(p,"class","modal-body"),i(j,"type","button"),i(j,"class","btn btn-secondary"),i(be,"class","fas fa-save me-1"),i(Z,"type","submit"),i(Z,"class","btn btn-primary"),i(v,"class","modal-footer"),i(l,"class","modal-content"),i(t,"class","modal-dialog modal-dialog-centered svelte-gb8wjm"),i(t,"role","document"),i(e,"class","modal fade show d-block svelte-gb8wjm"),i(e,"tabindex","-1"),i(e,"role","dialog"),i(De,"class","modal-backdrop fade show svelte-gb8wjm")},m(G,J){E(G,e,J),f(e,t),f(t,l),f(l,o),f(o,a),f(a,n),f(a,c),f(a,b),f(o,g),f(o,C),f(l,k),f(l,V),f(V,p),f(p,I),f(I,A),f(I,N),f(I,Q),ge(Q,s[3]),f(p,X),f(p,z),f(z,te),f(z,ae),f(z,q),ge(q,s[4]),f(z,y),x&&x.m(z,null),f(p,S),f(p,M),f(M,L),f(M,oe),f(M,U),ge(U,s[5]),f(p,me),f(p,le),f(le,ce),f(le,Ce),f(le,R),ge(R,s[6]),f(le,W),f(le,he),f(he,we),f(he,H),f(p,F),Y&&Y.m(p,null),f(V,m),f(V,v),f(v,j),f(v,ye),f(v,Z),f(Z,be),f(Z,_e),f(Z,Ee),f(Z,Ke),E(G,Me,J),E(G,De,J),Qe||(Ye=[$(C,"click",s[8]),$(Q,"input",s[10]),$(q,"input",s[11]),$(U,"input",s[12]),$(R,"input",s[13]),$(j,"click",s[8]),$(V,"submit",ht(s[7])),$(e,"click",s[9])],Qe=!0)},p(G,J){J&4&&r!==(r=G[2]?"Edit":"Log")&&ve(n,r),J&2&&d!==(d=G[1].title+"")&&ve(b,d),J&8&&ge(Q,G[3]),J&8&&i(q,"min",G[3]),J&16&&ge(q,G[4]),G[4]?x&&(x.d(1),x=null):x||(x=$e(),x.c(),x.m(z,null)),J&32&&dt(U.value)!==G[5]&&ge(U,G[5]),J&64&&ge(R,G[6]),J&64&&se!==(se=G[6].length+"")&&ve(we,se),G[3]&&G[4]?Y?Y.p(G,J):(Y=et(G),Y.c(),Y.m(p,null)):Y&&(Y.d(1),Y=null),J&4&&ke!==(ke=G[2]?"Update":"Log")&&ve(Ee,ke)},d(G){G&&(u(e),u(Me),u(De)),x&&x.d(),Y&&Y.d(),Qe=!1,ut(Ye)}}}function $e(s){let e,t="Leave empty for ongoing session";return{c(){e=_("small"),e.textContent=t,this.h()},l(l){e=h(l,"SMALL",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-15pa23w"&&(e.textContent=t),this.h()},h(){i(e,"class","text-muted")},m(l,o){E(l,e,o)},d(l){l&&u(e)}}}function et(s){let e,t,l,o=tt(s[3],s[4])+"",a;return{c(){e=_("div"),t=_("i"),l=P(`
                Duration: `),a=P(o),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=w(e);t=h(n,"I",{class:!0}),w(t).forEach(u),l=O(n,`
                Duration: `),a=O(n,o),n.forEach(u),this.h()},h(){i(t,"class","fas fa-clock me-2"),i(e,"class","alert alert-info")},m(r,n){E(r,e,n),f(e,t),f(e,l),f(e,a)},p(r,n){n&24&&o!==(o=tt(r[3],r[4])+"")&&ve(a,o)},d(r){r&&u(e)}}}function wt(s){let e,t=s[0]&&xe(s);return{c(){t&&t.c(),e=je()},l(l){t&&t.l(l),e=je()},m(l,o){t&&t.m(l,o),E(l,e,o)},p(l,[o]){l[0]?t?t.p(l,o):(t=xe(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ue,o:ue,d(l){l&&u(e),t&&t.d(l)}}}function tt(s,e){const t=new Date(s),o=new Date(e).getTime()-t.getTime(),a=Math.floor(o/6e4);if(a<60)return`${a} minute${a!==1?"s":""}`;const r=Math.floor(a/60),n=a%60;return n===0?`${r} hour${r!==1?"s":""}`:`${r} hour${r!==1?"s":""} ${n} minute${n!==1?"s":""}`}function yt(s,e,t){let{show:l=!1}=e,{game:o}=e,{session:a=null}=e;const r=mt();let n="",c="",d="",b="";ft(()=>{t(3,n=new Date().toISOString().slice(0,16))});function g(){console.log("SessionFormModal initializeForm called, session:",a),a?(t(3,n=new Date(a.start_time).toISOString().slice(0,16)),t(4,c=a.end_time?new Date(a.end_time).toISOString().slice(0,16):""),t(5,d=a.rating?.toString()||""),t(6,b=a.notes||"")):(t(3,n=new Date().toISOString().slice(0,16)),t(4,c=""),t(5,d=""),t(6,b="")),console.log("SessionFormModal initialized with startTime:",n)}function C(){if(console.log("SessionFormModal handleSubmit called with:",{startTime:n,endTime:c,rating:d,notes:b}),!n){console.error("StartTime is empty!",{startTime:n,typeof:typeof n}),alert("Please select a start time");return}try{const N={start_time:new Date(n).toISOString(),end_time:c?new Date(c).toISOString():void 0,rating:d?parseInt(d):void 0,notes:b||void 0};console.log("SessionFormModal dispatching session data:",N),r("submit",N)}catch(N){console.error("Error creating session data:",N),alert("Error preparing session data. Please check your inputs.")}}function k(){r("close")}function V(N){N.target===N.currentTarget&&k()}function p(){n=this.value,t(3,n)}function I(){c=this.value,t(4,c)}function A(){d=dt(this.value),t(5,d)}function ee(){b=this.value,t(6,b)}return s.$$set=N=>{"show"in N&&t(0,l=N.show),"game"in N&&t(1,o=N.game),"session"in N&&t(2,a=N.session)},s.$$.update=()=>{s.$$.dirty&1&&l&&g()},[l,o,a,n,c,d,b,C,k,V,p,I,A,ee]}class Et extends rt{constructor(e){super(),it(this,e,yt,wt,ct,{show:0,game:1,session:2})}}function lt(s,e,t){const l=s.slice();return l[24]=e[t],l}function st(s){let e,t='<i class="fas fa-times"></i>',l,o;return{c(){e=_("button"),e.innerHTML=t,this.h()},l(a){e=h(a,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),K(e)!=="svelte-82a2sv"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-outline-secondary"),i(e,"type","button")},m(a,r){E(a,e,r),l||(o=$(e,"click",s[19]),l=!0)},p:ue,d(a){a&&u(e),l=!1,o()}}}function Ct(s){let e=s[0].length+"",t,l;return{c(){t=P(e),l=P(" games total")},l(o){t=O(o,e),l=O(o," games total")},m(o,a){E(o,t,a),E(o,l,a)},p(o,a){a&1&&e!==(e=o[0].length+"")&&ve(t,e)},d(o){o&&(u(t),u(l))}}}function Dt(s){let e,t=s[9].length+"",l,o,a=s[0].length+"",r,n;return{c(){e=P("Showing "),l=P(t),o=P(" of "),r=P(a),n=P(" games")},l(c){e=O(c,"Showing "),l=O(c,t),o=O(c," of "),r=O(c,a),n=O(c," games")},m(c,d){E(c,e,d),E(c,l,d),E(c,o,d),E(c,r,d),E(c,n,d)},p(c,d){d&512&&t!==(t=c[9].length+"")&&ve(l,t),d&1&&a!==(a=c[0].length+"")&&ve(r,a)},d(c){c&&(u(e),u(l),u(o),u(r),u(n))}}}function Tt(s){let e,t=[],l=new Map,o,a=Ze(s[9]);const r=n=>n[24].id;for(let n=0;n<a.length;n+=1){let c=lt(s,a,n),d=r(c);l.set(d,t[n]=at(d,c))}return{c(){e=_("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=h(n,"DIV",{class:!0});var c=w(e);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(u),this.h()},h(){i(e,"class","row")},m(n,c){E(n,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);o=!0},p(n,c){c&176640&&(a=Ze(n[9]),Be(),t=pt(t,c,r,1,n,a,l,e,gt,at,null,lt),Ue())},i(n){if(!o){for(let c=0;c<a.length;c+=1)ne(t[c]);o=!0}},o(n){for(let c=0;c<t.length;c+=1)fe(t[c]);o=!1},d(n){n&&u(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function It(s){let e;function t(a,r){return a[1]?Vt:Mt}let l=t(s),o=l(s);return{c(){e=_("div"),o.c(),this.h()},l(a){e=h(a,"DIV",{class:!0});var r=w(e);o.l(r),r.forEach(u),this.h()},h(){i(e,"class","text-center py-5")},m(a,r){E(a,e,r),o.m(e,null)},p(a,r){l===(l=t(a))&&o?o.p(a,r):(o.d(1),o=l(a),o&&(o.c(),o.m(e,null)))},i:ue,o:ue,d(a){a&&u(e),o.d()}}}function St(s){let e,t,l,o,a,r,n,c="Try Again",d,b;return{c(){e=_("div"),t=_("i"),l=T(),o=_("div"),a=P(s[4]),r=T(),n=_("button"),n.textContent=c,this.h()},l(g){e=h(g,"DIV",{class:!0});var C=w(e);t=h(C,"I",{class:!0}),w(t).forEach(u),l=D(C),o=h(C,"DIV",{});var k=w(o);a=O(k,s[4]),r=D(k),n=h(k,"BUTTON",{class:!0,"data-svelte-h":!0}),K(n)!=="svelte-10cr3o9"&&(n.textContent=c),k.forEach(u),C.forEach(u),this.h()},h(){i(t,"class","fas fa-exclamation-triangle me-2"),i(n,"class","btn btn-sm btn-outline-danger ms-2"),i(e,"class","alert alert-danger d-flex align-items-center")},m(g,C){E(g,e,C),f(e,t),f(e,l),f(e,o),f(o,a),f(o,r),f(o,n),d||(b=$(n,"click",s[10]),d=!0)},p(g,C){C&16&&ve(a,g[4])},i:ue,o:ue,d(g){g&&u(e),d=!1,b()}}}function Lt(s){let e,t='<div class="text-center"><div class="spinner-border text-primary mb-3" role="status"><span class="visually-hidden">Loading...</span></div> <p class="text-muted">Loading games...</p></div>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),K(e)!=="svelte-1g4zktf"&&(e.innerHTML=t),this.h()},h(){i(e,"class","d-flex justify-content-center align-items-center"),_t(e,"height","300px")},m(l,o){E(l,e,o)},p:ue,i:ue,o:ue,d(l){l&&u(e)}}}function at(s,e){let t,l,o,a;return l=new vt({props:{game:e[24]}}),l.$on("edit",e[12]),l.$on("delete",e[13]),l.$on("log",e[15]),l.$on("view",e[17]),{key:s,first:null,c(){t=_("div"),Je(l.$$.fragment),o=T(),this.h()},l(r){t=h(r,"DIV",{class:!0});var n=w(t);Re(l.$$.fragment,n),o=D(n),n.forEach(u),this.h()},h(){i(t,"class","col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4"),this.first=t},m(r,n){E(r,t,n),qe(l,t,null),f(t,o),a=!0},p(r,n){e=r;const c={};n&512&&(c.game=e[24]),l.$set(c)},i(r){a||(ne(l.$$.fragment,r),a=!0)},o(r){fe(l.$$.fragment,r),a=!1},d(r){r&&u(t),ze(l)}}}function Mt(s){let e,t,l,o="No games in your collection",a,r,n="Start building your collection by adding your first game!",c,d,b='<i class="fas fa-plus me-1"></i> Add Your First Game',g,C;return{c(){e=_("i"),t=T(),l=_("h4"),l.textContent=o,a=T(),r=_("p"),r.textContent=n,c=T(),d=_("button"),d.innerHTML=b,this.h()},l(k){e=h(k,"I",{class:!0}),w(e).forEach(u),t=D(k),l=h(k,"H4",{"data-svelte-h":!0}),K(l)!=="svelte-1d281y8"&&(l.textContent=o),a=D(k),r=h(k,"P",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-1vx8u7"&&(r.textContent=n),c=D(k),d=h(k,"BUTTON",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-9pz2no"&&(d.innerHTML=b),this.h()},h(){i(e,"class","fas fa-gamepad fa-3x text-muted mb-3"),i(r,"class","text-muted"),i(d,"class","btn btn-primary")},m(k,V){E(k,e,V),E(k,t,V),E(k,l,V),E(k,a,V),E(k,r,V),E(k,c,V),E(k,d,V),g||(C=$(d,"click",s[11]),g=!0)},p:ue,d(k){k&&(u(e),u(t),u(l),u(a),u(r),u(c),u(d)),g=!1,C()}}}function Vt(s){let e,t,l,o="No games found",a,r,n,c,d,b,g,C="Clear Search",k,V;return{c(){e=_("i"),t=T(),l=_("h4"),l.textContent=o,a=T(),r=_("p"),n=P('No games match your search "'),c=P(s[1]),d=P('"'),b=T(),g=_("button"),g.textContent=C,this.h()},l(p){e=h(p,"I",{class:!0}),w(e).forEach(u),t=D(p),l=h(p,"H4",{"data-svelte-h":!0}),K(l)!=="svelte-1o14eci"&&(l.textContent=o),a=D(p),r=h(p,"P",{class:!0});var I=w(r);n=O(I,'No games match your search "'),c=O(I,s[1]),d=O(I,'"'),I.forEach(u),b=D(p),g=h(p,"BUTTON",{class:!0,"data-svelte-h":!0}),K(g)!=="svelte-ocaac3"&&(g.textContent=C),this.h()},h(){i(e,"class","fas fa-search fa-3x text-muted mb-3"),i(r,"class","text-muted"),i(g,"class","btn btn-outline-primary")},m(p,I){E(p,e,I),E(p,t,I),E(p,l,I),E(p,a,I),E(p,r,I),f(r,n),f(r,c),f(r,d),E(p,b,I),E(p,g,I),k||(V=$(g,"click",s[20]),k=!0)},p(p,I){I&2&&ve(c,p[1])},d(p){p&&(u(e),u(t),u(l),u(a),u(r),u(b),u(g)),k=!1,V()}}}function nt(s){let e,t;return e=new kt({props:{game:s[8],show:s[6]}}),e.$on("close",s[22]),e.$on("edit",s[12]),e.$on("delete",s[13]),e.$on("log",s[15]),{c(){Je(e.$$.fragment)},l(l){Re(e.$$.fragment,l)},m(l,o){qe(e,l,o),t=!0},p(l,o){const a={};o&256&&(a.game=l[8]),o&64&&(a.show=l[6]),e.$set(a)},i(l){t||(ne(e.$$.fragment,l),t=!0)},o(l){fe(e.$$.fragment,l),t=!1},d(l){ze(e,l)}}}function ot(s){let e,t;return e=new Et({props:{game:s[8],show:s[7]}}),e.$on("submit",s[16]),e.$on("close",s[23]),{c(){Je(e.$$.fragment)},l(l){Re(e.$$.fragment,l)},m(l,o){qe(e,l,o),t=!0},p(l,o){const a={};o&256&&(a.game=l[8]),o&128&&(a.show=l[7]),e.$set(a)},i(l){t||(ne(e.$$.fragment,l),t=!0)},o(l){fe(e.$$.fragment,l),t=!1},d(l){ze(e,l)}}}function Nt(s){let e,t,l,o="Game Collection",a,r,n,c,d,b,g,C,k='<i class="fas fa-plus me-1"></i> Add Game',V,p,I,A,ee,N='<i class="fas fa-search"></i>',Q,X,z,te,ie,ae,q,y,S,M,L,de,oe,U,me,le,ce,B=s[1]&&st(s);function Ce(m,v){return m[1]?Dt:Ct}let R=Ce(s),W=R(s);const he=[Lt,St,It,Tt],se=[];function we(m,v){return m[3]?0:m[4]?1:m[9].length===0?2:3}y=we(s),S=se[y]=he[y](s),L=new bt({props:{game:s[8],platforms:s[2],show:s[5]}}),L.$on("submit",s[14]),L.$on("close",s[21]);let H=s[6]&&s[8]&&nt(s),F=s[7]&&s[8]&&ot(s);return{c(){e=_("div"),t=_("div"),l=_("h1"),l.textContent=o,a=T(),r=_("div"),n=_("button"),c=_("i"),b=P(" Refresh"),g=T(),C=_("button"),C.innerHTML=k,V=T(),p=_("div"),I=_("div"),A=_("div"),ee=_("span"),ee.innerHTML=N,Q=T(),X=_("input"),z=T(),B&&B.c(),te=T(),ie=_("div"),ae=_("p"),W.c(),q=T(),S.c(),M=T(),Je(L.$$.fragment),de=T(),H&&H.c(),oe=T(),F&&F.c(),U=je(),this.h()},l(m){e=h(m,"DIV",{class:!0});var v=w(e);t=h(v,"DIV",{class:!0});var j=w(t);l=h(j,"H1",{"data-svelte-h":!0}),K(l)!=="svelte-8q22c4"&&(l.textContent=o),a=D(j),r=h(j,"DIV",{class:!0});var re=w(r);n=h(re,"BUTTON",{class:!0});var ye=w(n);c=h(ye,"I",{class:!0}),w(c).forEach(u),b=O(ye," Refresh"),ye.forEach(u),g=D(re),C=h(re,"BUTTON",{class:!0,"data-svelte-h":!0}),K(C)!=="svelte-mzv9ad"&&(C.innerHTML=k),re.forEach(u),j.forEach(u),V=D(v),p=h(v,"DIV",{class:!0});var Z=w(p);I=h(Z,"DIV",{class:!0});var be=w(I);A=h(be,"DIV",{class:!0});var _e=w(A);ee=h(_e,"SPAN",{class:!0,"data-svelte-h":!0}),K(ee)!=="svelte-1ag4q0b"&&(ee.innerHTML=N),Q=D(_e),X=h(_e,"INPUT",{type:!0,class:!0,placeholder:!0}),z=D(_e),B&&B.l(_e),_e.forEach(u),be.forEach(u),te=D(Z),ie=h(Z,"DIV",{class:!0});var ke=w(ie);ae=h(ke,"P",{class:!0});var Ee=w(ae);W.l(Ee),Ee.forEach(u),ke.forEach(u),Z.forEach(u),q=D(v),S.l(v),v.forEach(u),M=D(m),Re(L.$$.fragment,m),de=D(m),H&&H.l(m),oe=D(m),F&&F.l(m),U=je(),this.h()},h(){i(c,"class",d="fas fa-sync-alt "+(s[3]?"fa-spin":"")),i(n,"class","btn btn-outline-secondary"),n.disabled=s[3],i(C,"class","btn btn-primary"),i(r,"class","d-flex gap-2"),i(t,"class","d-flex justify-content-between align-items-center mb-4"),i(ee,"class","input-group-text"),i(X,"type","text"),i(X,"class","form-control"),i(X,"placeholder","Search games by title, genre, or platform..."),i(A,"class","input-group"),i(I,"class","col-md-6"),i(ae,"class","text-muted mt-2 mb-0"),i(ie,"class","col-md-6"),i(p,"class","row mb-4"),i(e,"class","container-fluid mt-4")},m(m,v){E(m,e,v),f(e,t),f(t,l),f(t,a),f(t,r),f(r,n),f(n,c),f(n,b),f(r,g),f(r,C),f(e,V),f(e,p),f(p,I),f(I,A),f(A,ee),f(A,Q),f(A,X),ge(X,s[1]),f(A,z),B&&B.m(A,null),f(p,te),f(p,ie),f(ie,ae),W.m(ae,null),f(e,q),se[y].m(e,null),E(m,M,v),qe(L,m,v),E(m,de,v),H&&H.m(m,v),E(m,oe,v),F&&F.m(m,v),E(m,U,v),me=!0,le||(ce=[$(n,"click",s[10]),$(C,"click",s[11]),$(X,"input",s[18])],le=!0)},p(m,[v]){(!me||v&8&&d!==(d="fas fa-sync-alt "+(m[3]?"fa-spin":"")))&&i(c,"class",d),(!me||v&8)&&(n.disabled=m[3]),v&2&&X.value!==m[1]&&ge(X,m[1]),m[1]?B?B.p(m,v):(B=st(m),B.c(),B.m(A,null)):B&&(B.d(1),B=null),R===(R=Ce(m))&&W?W.p(m,v):(W.d(1),W=R(m),W&&(W.c(),W.m(ae,null)));let j=y;y=we(m),y===j?se[y].p(m,v):(Be(),fe(se[j],1,1,()=>{se[j]=null}),Ue(),S=se[y],S?S.p(m,v):(S=se[y]=he[y](m),S.c()),ne(S,1),S.m(e,null));const re={};v&256&&(re.game=m[8]),v&4&&(re.platforms=m[2]),v&32&&(re.show=m[5]),L.$set(re),m[6]&&m[8]?H?(H.p(m,v),v&320&&ne(H,1)):(H=nt(m),H.c(),ne(H,1),H.m(oe.parentNode,oe)):H&&(Be(),fe(H,1,1,()=>{H=null}),Ue()),m[7]&&m[8]?F?(F.p(m,v),v&384&&ne(F,1)):(F=ot(m),F.c(),ne(F,1),F.m(U.parentNode,U)):F&&(Be(),fe(F,1,1,()=>{F=null}),Ue())},i(m){me||(ne(S),ne(L.$$.fragment,m),ne(H),ne(F),me=!0)},o(m){fe(S),fe(L.$$.fragment,m),fe(H),fe(F),me=!1},d(m){m&&(u(e),u(M),u(de),u(oe),u(U)),B&&B.d(),W.d(),se[y].d(),ze(L,m),H&&H.d(m),F&&F.d(m),le=!1,ut(ce)}}}function Gt(s,e,t){let l=[],o=[],a=!0,r=null,n=!1,c=!1,d=!1,b=null,g="",C=[];ft(async()=>{await k()});async function k(){try{t(3,a=!0),t(4,r=null);const[y,S]=await Promise.all([Se.getGames(),Se.getPlatforms()]);t(0,l=y||[]),t(2,o=S||[])}catch(y){y instanceof Pe?t(4,r=`Failed to load data: ${y.message}`):t(4,r="Error connecting to the backend. Please check if the server is running."),console.error("Load data error:",y)}finally{t(3,a=!1)}}function V(){t(8,b=null),t(5,n=!0)}function p(y){t(8,b=y.detail),t(6,c=!1),t(5,n=!0)}async function I(y){const S=y.detail;try{await Se.deleteGame(S),t(0,l=l.filter(M=>M.id!==S))}catch(M){M instanceof Pe?alert(`Failed to delete game: ${M.message}`):alert("An error occurred while deleting the game."),console.error("Delete game error:",M)}}async function A(y){const S=y.detail,M=!!b;try{let L;if(M&&b){L=await Se.updateGame(b.id,S);const de=l.findIndex(oe=>oe.id===b.id);de!==-1&&(t(0,l[de]=L,l),t(0,l=[...l]))}else L=await Se.createGame(S),t(0,l=[...l,L]);t(5,n=!1)}catch(L){L instanceof Pe?alert(`Failed to save game: ${L.message}`):alert("An error occurred while saving the game."),console.error("Save game error:",L)}}function ee(y){const S=y.detail,M=l.find(L=>L.id===S);M&&(t(8,b=M),t(7,d=!0),t(6,c=!1))}async function N(y){const S=y.detail;if(b){console.log("Session data being sent:",S);try{await Se.createSession(b.id,S),t(7,d=!1)}catch(M){M instanceof Pe?alert(`Failed to log session: ${M.message}`):alert("An error occurred while logging the session."),console.error("Log session error:",M),console.error("Session data that failed:",S)}}}function Q(y){t(8,b=y.detail),t(6,c=!0)}function X(){g=this.value,t(1,g)}const z=()=>t(1,g=""),te=()=>t(1,g=""),ie=()=>t(5,n=!1),ae=()=>t(6,c=!1),q=()=>t(7,d=!1);return s.$$.update=()=>{s.$$.dirty&3&&t(9,C=g?l.filter(y=>y.title.toLowerCase().includes(g.toLowerCase())||y.genre?.toLowerCase().includes(g.toLowerCase())||y.platform?.name?.toLowerCase().includes(g.toLowerCase())):l)},[l,g,o,a,r,n,c,d,b,C,k,V,p,I,A,ee,N,Q,X,z,te,ie,ae,q]}class Bt extends rt{constructor(e){super(),it(this,e,Gt,Nt,ct,{})}}export{Bt as component};
